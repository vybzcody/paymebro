node index.js
üìß Email service enabled with Resend
üìß From email: AfriPay <onboarding@resend.dev>
üìß Email service enabled with Resend
üìß From email: AfriPay <onboarding@resend.dev>
‚úÖ Configuration validated successfully
üöÄ Server will run on port 3001
üåê Solana Network: devnet
üí≥ USDC Mint: Gh9ZwEmdLJ8DscKNTkTqPbNwLNNBjuSzaG9Vp2KGtKJr
üí∞ AfriPay Fee Rate: 2.90%
(node:65943) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
\nüöÄ AfriPay Backend Server Started Successfully!
================================================
üì° Server: http://localhost:3001
üåç Environment: development
üè• Health Check: http://localhost:3001/health
üìö Documentation: http://localhost:3001/docs
================================================
‚úÖ Ready to process Solana Pay transactions!
\nüîß Development Mode - Additional Info:
   - Hot reload: Not enabled (use nodemon)
   - Error details: Exposed in responses
   - CORS: Permissive for development
   - Rate limiting: Reduced for testing
üîç Starting transaction monitoring...
üì° Monitoring 3 payment references
Error inserting transaction EhALKzG7oZGN1xtx5q7BiDYkw59VBMHouy6RMpywRpUyxxdX83j9GGuadzNcwjcB8Csiu8Vqroyhf57DubKWuHh: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
Error inserting transaction 66zaxqV77YvijLeefxbg1eFv7stsWfdmjRUkAaJH4N3KCeKg4U7WAF9awKmwcdp4LXmzfPqnSwKJYETb2BFdn4Gm: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
Error inserting transaction 4yFRD348oXXtk5hy8EVJqzUvzQ4iaDM7MB49VGSAzqMbVVaTHRDGkGqMZrrnvrjR3VN7Kw8mbWLGbwY6shF6cjaQ: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
Error inserting transaction EhALKzG7oZGN1xtx5q7BiDYkw59VBMHouy6RMpywRpUyxxdX83j9GGuadzNcwjcB8Csiu8Vqroyhf57DubKWuHh: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
Error inserting transaction 66zaxqV77YvijLeefxbg1eFv7stsWfdmjRUkAaJH4N3KCeKg4U7WAF9awKmwcdp4LXmzfPqnSwKJYETb2BFdn4Gm: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
Error inserting transaction 4yFRD348oXXtk5hy8EVJqzUvzQ4iaDM7MB49VGSAzqMbVVaTHRDGkGqMZrrnvrjR3VN7Kw8mbWLGbwY6shF6cjaQ: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
üîê User login request: {
  web3authUserId: 'arubacosmas@gmail.com',
  email: 'arubacosmas@gmail.com',
  loginProvider: 'google'
}
üîê Upserting user: {
  web3authUserId: 'arubacosmas@gmail.com',
  email: 'arubacosmas@gmail.com',
  loginProvider: 'google'
}
‚úÖ User upserted successfully: arubacosmas@gmail.com
POST /api/user/login 200 755.300 ms - 483
Error inserting transaction EhALKzG7oZGN1xtx5q7BiDYkw59VBMHouy6RMpywRpUyxxdX83j9GGuadzNcwjcB8Csiu8Vqroyhf57DubKWuHh: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
Error inserting transaction 66zaxqV77YvijLeefxbg1eFv7stsWfdmjRUkAaJH4N3KCeKg4U7WAF9awKmwcdp4LXmzfPqnSwKJYETb2BFdn4Gm: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
Error inserting transaction 4yFRD348oXXtk5hy8EVJqzUvzQ4iaDM7MB49VGSAzqMbVVaTHRDGkGqMZrrnvrjR3VN7Kw8mbWLGbwY6shF6cjaQ: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
Error inserting transaction EhALKzG7oZGN1xtx5q7BiDYkw59VBMHouy6RMpywRpUyxxdX83j9GGuadzNcwjcB8Csiu8Vqroyhf57DubKWuHh: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
QR Create Request Body: {
  walletAddress: '9CPhDgxQGHAvtHpaVjbemhPVXtN6ginqhAVyeocBN8z',
  title: 'Production',
  amount: 0.005,
  currency: 'USDC'
}
Extracted currency: USDC
Currency type: string
Currency: USDC Token Mint: Gh9ZwEmdLJ8DscKNTkTqPbNwLNNBjuSzaG9Vp2KGtKJr
Transfer request object: {
  recipient: PublicKey [PublicKey(9CPhDgxQGHAvtHpaVjbemhPVXtN6ginqhAVyeocBN8z)] {
    _bn: <BN: 21986d071d190f662ce811cf504ffe2f01d3f2d45b14736415e31797985b083>
  },
  amount: 0.005,
  reference: PublicKey [PublicKey(Db7TXQcV2mS9FCyUYgeUAPFfPF2jyYUhCKg3HSPGjoWJ)] {
    _bn: <BN: bb094abc2ec0b026367949b02cf5cadf63b9a802dd9d3e6f3cf2ee8b9cf0c99b>
  },
  label: 'Production',
  message: 'Payment for Production',
  splToken: PublicKey [PublicKey(Gh9ZwEmdLJ8DscKNTkTqPbNwLNNBjuSzaG9Vp2KGtKJr)] {
    _bn: <BN: e92839550965ffd4d64acaaf46d45df7318e5b4f57c90c487d60625d829b837b>
  }
}
Generated Solana Pay URL: solana:9CPhDgxQGHAvtHpaVjbemhPVXtN6ginqhAVyeocBN8z?amount=0.005&spl-token=Gh9ZwEmdLJ8DscKNTkTqPbNwLNNBjuSzaG9Vp2KGtKJr&reference=Db7TXQcV2mS9FCyUYgeUAPFfPF2jyYUhCKg3HSPGjoWJ&label=Production&message=Payment+for+Production
QR Code URL: https://api.qrserver.com/v1/create-qr-code/?size=400x400&format=png&margin=10&data=solana%3A9CPhDgxQGHAvtHpaVjbemhPVXtN6ginqhAVyeocBN8z%3Famount%3D0.005%26spl-token%3DGh9ZwEmdLJ8DscKNTkTqPbNwLNNBjuSzaG9Vp2KGtKJr%26reference%3DDb7TXQcV2mS9FCyUYgeUAPFfPF2jyYUhCKg3HSPGjoWJ%26label%3DProduction%26message%3DPayment%2Bfor%2BProduction
Error inserting transaction 66zaxqV77YvijLeefxbg1eFv7stsWfdmjRUkAaJH4N3KCeKg4U7WAF9awKmwcdp4LXmzfPqnSwKJYETb2BFdn4Gm: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
POST /api/qr/create 200 720.981 ms - 958
Error inserting transaction 4yFRD348oXXtk5hy8EVJqzUvzQ4iaDM7MB49VGSAzqMbVVaTHRDGkGqMZrrnvrjR3VN7Kw8mbWLGbwY6shF6cjaQ: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
Error inserting transaction EhALKzG7oZGN1xtx5q7BiDYkw59VBMHouy6RMpywRpUyxxdX83j9GGuadzNcwjcB8Csiu8Vqroyhf57DubKWuHh: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
Error inserting transaction 66zaxqV77YvijLeefxbg1eFv7stsWfdmjRUkAaJH4N3KCeKg4U7WAF9awKmwcdp4LXmzfPqnSwKJYETb2BFdn4Gm: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
Error inserting transaction 4yFRD348oXXtk5hy8EVJqzUvzQ4iaDM7MB49VGSAzqMbVVaTHRDGkGqMZrrnvrjR3VN7Kw8mbWLGbwY6shF6cjaQ: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
QR Create Request Body: {
  walletAddress: '9CPhDgxQGHAvtHpaVjbemhPVXtN6ginqhAVyeocBN8z',
  title: 'paymebt',
  amount: 0.002,
  currency: 'SOL'
}
Extracted currency: SOL
Currency type: string
Currency: SOL Token Mint: undefined (SOL)
Transfer request object: {
  recipient: PublicKey [PublicKey(9CPhDgxQGHAvtHpaVjbemhPVXtN6ginqhAVyeocBN8z)] {
    _bn: <BN: 21986d071d190f662ce811cf504ffe2f01d3f2d45b14736415e31797985b083>
  },
  amount: 0.002,
  reference: PublicKey [PublicKey(9bk9MxdepDUSWKkRb5mHS5tj7NNheRfVDPbEYJdMbtAA)] {
    _bn: <BN: 7fc406b39e615b1f1319fd09eaba6776a57d82dc28729624e330619c4bc6720f>
  },
  label: 'paymebt',
  message: 'Payment for paymebt'
}
Generated Solana Pay URL: solana:9CPhDgxQGHAvtHpaVjbemhPVXtN6ginqhAVyeocBN8z?amount=0.002&reference=9bk9MxdepDUSWKkRb5mHS5tj7NNheRfVDPbEYJdMbtAA&label=paymebt&message=Payment+for+paymebt
QR Code URL: https://api.qrserver.com/v1/create-qr-code/?size=400x400&format=png&margin=10&data=solana%3A9CPhDgxQGHAvtHpaVjbemhPVXtN6ginqhAVyeocBN8z%3Famount%3D0.002%26reference%3D9bk9MxdepDUSWKkRb5mHS5tj7NNheRfVDPbEYJdMbtAA%26label%3Dpaymebt%26message%3DPayment%2Bfor%2Bpaymebt
POST /api/qr/create 200 476.514 ms - 828
Error inserting transaction 2tg1Mje1J36Tgi3fF3MRUdHKe2PQuTRUXQcNWoTdCyjEHLHNhEGQHGyERn2tMZrKn4wURFYqNghnLt4JE7fzqrLD: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'qr_code_id' column of 'transactions' in the schema cache"
}
